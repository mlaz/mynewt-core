NimBLE Host Identity Reference
------------------------------

Introduction
~~~~~~~~~~~~

The identity API provides facilities for querying and configuring your
device's addresses. BLE's addressing scheme is quite involved; the
summary that follows is only a brief introduction.

BLE defines four address types:

+--------------+---------------------------------------+------+-------------------+
| Type         | Description                           | Iden | Configured with   |
|              |                                       | tity |                   |
|              |                                       | ?    |                   |
+==============+=======================================+======+===================+
| Public       | Address assigned by manufacturer; the | Yes  | N/A; read from    |
|              | three most significant bytes form the |      | controller at     |
|              | manufacturer's OUI.                   |      | startup.          |
+--------------+---------------------------------------+------+-------------------+
| Static       | Randomly generated address.           | Yes  | *ble\_hs\_id\_set |
| random       |                                       |      | \_rnd()*          |
+--------------+---------------------------------------+------+-------------------+
| Resolvable   | Address randomly generated from an    | No   | N/A; generated by |
| private      | identity address and an identity      |      | controller        |
| (RPA)        | resolving key (IRK).                  |      | periodically.     |
+--------------+---------------------------------------+------+-------------------+
| Non-resolvab | Randomly generated address.           | No   | *ble\_hs\_id\_set |
| le           |                                       |      | \_rnd()*          |
| private      |                                       |      |                   |
| (NRPA)       |                                       |      |                   |
+--------------+---------------------------------------+------+-------------------+

Identity Addresses
^^^^^^^^^^^^^^^^^^

The third column in the above table indicates the *identity* property of
each address type. An identity address never changes, and a device can
be identified by one of its unique identity addresses.

Non-identity addresses are used by devices supporting BLE privacy. A
device using the privacy feature frequently changes its own address to a
newly-generated non-identity address. By cycling its address, the device
makes it impossible for eavesdroppers to track its location.

A device can have up to two identity addresses at once: one public and
one static random. As indicated in the above table, the public identity
address cannot be configured; the static random identity address can be
set by calling *ble\_hs\_id\_set\_rnd()*.

The address type is selected on a per-GAP-procedure basis. Each time you
initiate a GAP procedure, you indicate which address type the device
should use for the duration of the procedure.

Header
~~~~~~

.. code:: c

    #include "host/ble_hs.h"

Definitions
~~~~~~~~~~~

None.

Functions
~~~~~~~~~

+------------------------------------------------------------------+-----------------------------------------------------+
| Function                                                         | Description                                         |
+==================================================================+=====================================================+
| `ble\_hs\_id\_copy\_addr <functions/ble_hs_id_copy_addr.html>`__   | Retrieves one of the device's identity addresses.   |
+------------------------------------------------------------------+-----------------------------------------------------+
| `ble\_hs\_id\_gen\_rnd <functions/ble_hs_id_gen_rnd.html>`__       | Generates a new random address.                     |
+------------------------------------------------------------------+-----------------------------------------------------+
| `ble\_hs\_id\_set\_rnd <functions/ble_hs_id_set_rnd.html>`__       | Sets the device's random address.                   |
+------------------------------------------------------------------+-----------------------------------------------------+
